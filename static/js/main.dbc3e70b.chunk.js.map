{"version":3,"sources":["contexts/AuthContext.js","firebase.js","components/Chats.js","components/Login.js","components/App.js","index.js"],"names":["AuthContext","React","createContext","AuthProvider","children","useState","loading","setLoading","user","setUser","history","useHistory","useEffect","auth","onAuthStateChanged","push","value","Provider","firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","Chats","useContext","handleLogout","a","signOut","getFile","url","fetch","response","blob","data","File","type","axios","get","headers","email","uid","then","catch","formdata","FormData","append","photoURL","avatar","name","post","err","console","log","className","onClick","height","projectID","userName","userSecret","Login","id","signInWithRedirect","GoogleAuthProvider","GoogleOutlined","App","style","fontFamily","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"uLAIMA,EAAcC,IAAMC,gBAIbC,EAAe,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SAC9B,EAA8BC,oBAAS,GAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KACA,EAAwBF,mBAAS,MAAjC,mBAAOG,EAAP,KAAaC,EAAb,KACMC,EAAUC,cAEhBC,qBAAU,WACTC,iBAAOC,oBAAmB,SAACN,GAC1BC,EAAQD,GACRD,GAAW,GAEPC,GACHE,EAAQK,KAAK,eAGb,CAACP,EAAME,IAEV,IAAMM,EAAQ,CAAER,QAEhB,OACC,kBAACR,EAAYiB,SAAb,CAAsBD,MAAOA,IAC1BV,GAAWF,I,kDCzBHS,G,OAAOK,IAClBC,cAAc,CACdC,OAAQC,0CACRC,WAAYD,gCACZE,UAAWF,gBACXG,cAAeH,4BACfI,kBAAmBJ,gBACnBK,MAAOL,+CAEPR,Q,gBCyEac,EA7ED,WACb,IAAMjB,EAAUC,cACRH,EFJoBoB,qBAAW5B,GEI/BQ,KACR,EAA8BH,oBAAS,GAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KAEMsB,EAAY,uCAAG,sBAAAC,EAAA,sEACdjB,EAAKkB,UADS,OAEpBrB,EAAQK,KAAK,KAFO,2CAAH,qDAKZiB,EAAO,uCAAG,WAAOC,GAAP,iBAAAH,EAAA,sEACQI,MAAMD,GADd,cACTE,EADS,gBAEIA,EAASC,OAFb,cAETC,EAFS,yBAIR,IAAIC,KAAK,CAACD,GAAO,gBAAiB,CAAEE,KAAM,gBAJlC,2CAAH,sDA8Cb,OAvCA3B,qBAAU,WACJJ,EAKLgC,IACEC,IAAI,qCAAsC,CAC1CC,QAAS,CACR,aAAcrB,uCACd,YAAab,EAAKmC,MAClB,cAAenC,EAAKoC,OAGrBC,MAAK,WACLtC,GAAW,MAEXuC,OAAM,WACN,IAAIC,EAAW,IAAIC,SACnBD,EAASE,OAAO,QAASzC,EAAKmC,OAC9BI,EAASE,OAAO,WAAYzC,EAAKmC,OACjCI,EAASE,OAAO,SAAUzC,EAAKoC,KAE/BZ,EAAQxB,EAAK0C,UAAUL,MAAK,SAACM,GAC5BJ,EAASE,OAAO,SAAUE,EAAQA,EAAOC,MAEzCZ,IACEa,KAAK,kCAAmCN,EAAU,CAClDL,QAAS,CACR,cACCrB,0CAGFwB,MAAK,kBAAMtC,GAAW,MACtBuC,OAAM,SAACQ,GAAD,OAASC,QAAQC,IAAIF,YAhC/B5C,EAAQK,KAAK,OAmCZ,CAACP,EAAME,KAELF,GAAQF,EAAgB,eAG5B,yBAAKmD,UAAU,cACd,yBAAKA,UAAU,WACd,yBAAKA,UAAU,YAAf,WACA,yBAAKA,UAAU,aAAaC,QAAS7B,GAArC,WAMD,kBAAC,IAAD,CACC8B,OAAO,qBACPC,UAAWvC,uCACXwC,SAAUrD,EAAKmC,MACfmB,WAAYtD,EAAKoC,Q,SCtDNmB,EApBD,WACb,OACC,yBAAKC,GAAG,cACP,yBAAKA,GAAG,cACP,kDACA,yBACCP,UAAU,sBACVC,QAAS,kBACR7C,EAAKoD,mBACJ,IAAI/C,IAASL,KAAKqD,sBAIpB,kBAACC,EAAA,EAAD,MARD,2BCaWC,MAff,WACC,OACC,yBAAKC,MAAO,CAAEC,WAAY,WACzB,kBAAC,IAAD,KACC,kBAAC,EAAD,KACC,kBAAC,IAAD,KACC,kBAAC,IAAD,CAAOC,KAAK,SAASC,UAAW7C,IAChC,kBAAC,IAAD,CAAO4C,KAAK,IAAIC,UAAWT,SCXjCU,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,U","file":"static/js/main.dbc3e70b.chunk.js","sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { auth } from \"firebase\";\n\nconst AuthContext = React.createContext();\n\nexport const useAuth = () => useContext(AuthContext);\n\nexport const AuthProvider = ({ children }) => {\n\tconst [loading, setLoading] = useState(true);\n\tconst [user, setUser] = useState(null);\n\tconst history = useHistory();\n\n\tuseEffect(() => {\n\t\tauth().onAuthStateChanged((user) => {\n\t\t\tsetUser(user);\n\t\t\tsetLoading(false);\n\n\t\t\tif (user) {\n\t\t\t\thistory.push(\"/chats\");\n\t\t\t}\n\t\t});\n\t}, [user, history]);\n\n\tconst value = { user };\n\n\treturn (\n\t\t<AuthContext.Provider value={value}>\n\t\t\t{!loading && children}\n\t\t</AuthContext.Provider>\n\t);\n};\n","import firebase from \"firebase/app\";\nimport \"firebase/auth\";\n\nexport const auth = firebase\n\t.initializeApp({\n\t\tapiKey: process.env.REACT_APP_API_KEY,\n\t\tauthDomain: process.env.REACT_APP_AUTH_DOMAIN,\n\t\tprojectId: process.env.REACT_APP_PROJECT_ID,\n\t\tstorageBucket: process.env.REACT_APP_STORAGE_BUCKET,\n\t\tmessagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\n\t\tappId: process.env.REACT_APP_APP_ID,\n\t})\n\t.auth();\n","import React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { ChatEngine } from \"react-chat-engine\";\nimport { auth } from \"../firebase\";\n\nimport { useAuth } from \"../contexts/AuthContext\";\nimport axios from \"axios\";\n\nconst Chats = () => {\n\tconst history = useHistory();\n\tconst { user } = useAuth();\n\tconst [loading, setLoading] = useState(true);\n\n\tconst handleLogout = async () => {\n\t\tawait auth.signOut();\n\t\thistory.push(\"/\");\n\t};\n\n\tconst getFile = async (url) => {\n\t\tconst response = await fetch(url);\n\t\tconst data = await response.blob();\n\n\t\treturn new File([data], \"userPhoto.jpg\", { type: \"image/jpeg\" });\n\t};\n\n\tuseEffect(() => {\n\t\tif (!user) {\n\t\t\thistory.push(\"/\");\n\t\t\treturn;\n\t\t}\n\n\t\taxios\n\t\t\t.get(\"https://api.chatengine.io/users/me\", {\n\t\t\t\theaders: {\n\t\t\t\t\t\"project-id\": process.env.REACT_APP_CHAT_ENGINE_ID,\n\t\t\t\t\t\"user-name\": user.email,\n\t\t\t\t\t\"user-secret\": user.uid,\n\t\t\t\t},\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tsetLoading(false);\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tlet formdata = new FormData();\n\t\t\t\tformdata.append(\"email\", user.email);\n\t\t\t\tformdata.append(\"username\", user.email);\n\t\t\t\tformdata.append(\"secret\", user.uid);\n\n\t\t\t\tgetFile(user.photoURL).then((avatar) => {\n\t\t\t\t\tformdata.append(\"avatar\", avatar, avatar.name);\n\n\t\t\t\t\taxios\n\t\t\t\t\t\t.post(\"https://api.chatengine.io/users\", formdata, {\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\"private-key\":\n\t\t\t\t\t\t\t\t\tprocess.env.REACT_APP_CHAT_ENGINE_KEY,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(() => setLoading(false))\n\t\t\t\t\t\t.catch((err) => console.log(err));\n\t\t\t\t});\n\t\t\t});\n\t}, [user, history]);\n\n\tif (!user || loading) return \"Loading ....\";\n\n\treturn (\n\t\t<div className=\"chats-page\">\n\t\t\t<div className=\"nav-bar\">\n\t\t\t\t<div className=\"logo-tab\">Unichat</div>\n\t\t\t\t<div className=\"logout-tab\" onClick={handleLogout}>\n\t\t\t\t\tLogout\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Chat Engine */}\n\t\t\t<ChatEngine\n\t\t\t\theight=\"calc(100vh - 66px)\"\n\t\t\t\tprojectID={process.env.REACT_APP_CHAT_ENGINE_ID}\n\t\t\t\tuserName={user.email}\n\t\t\t\tuserSecret={user.uid}\n\t\t\t/>\n\t\t</div>\n\t);\n};\nexport default Chats;\n","import React from \"react\";\nimport { GoogleOutlined } from \"@ant-design/icons\";\n\nimport firebase from \"firebase/app\";\nimport { auth } from \"../firebase\";\n\nconst Login = () => {\n\treturn (\n\t\t<div id=\"login-page\">\n\t\t\t<div id=\"login-card\">\n\t\t\t\t<h2>Welcome to Unichat</h2>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"login-button google\"\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\tauth.signInWithRedirect(\n\t\t\t\t\t\t\tnew firebase.auth.GoogleAuthProvider()\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<GoogleOutlined /> Sign In With Google\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Login;\n","import React from \"react\";\n\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\n\nimport { AuthProvider } from \"../contexts/AuthContext\";\n\nimport Chats from \"./Chats\";\nimport Login from \"./Login\";\n\nfunction App() {\n\treturn (\n\t\t<div style={{ fontFamily: \"Avenir\" }}>\n\t\t\t<Router>\n\t\t\t\t<AuthProvider>\n\t\t\t\t\t<Switch>\n\t\t\t\t\t\t<Route path=\"/chats\" component={Chats} />\n\t\t\t\t\t\t<Route path=\"/\" component={Login} />\n\t\t\t\t\t</Switch>\n\t\t\t\t</AuthProvider>\n\t\t\t</Router>\n\t\t</div>\n\t);\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}